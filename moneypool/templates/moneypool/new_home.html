{% extends 'moneypool/new_base.html' %}

{% block content%}


<script>

  changeTabTo("{{current_tab}}")

</script>


<div class="row">
    <div  class=" col-md-2 d-none d-md-block" >
</div>
<div class="col-md-2 d-none d-md-block " style="position: fixed; background-color: rgba(191, 191, 191, 0.8); height:100%;">
    <div class="row justify-content-center " style="margin: 20px 10px 0px 10px; padding: 5px">

      <div class=" col  justify-content-center profile" style="text-align:center; margin:10px 10px 0px 10px; padding 15px;">
        <div>
        <img src="../../static/moneypool/someimg.png"
                  alt="Avatar" class="avatar"
                  style="vertical-align: middle;
                  width: 50px;
                  height: 50px;
                  border-radius: 50%;" />

      </div>
          </div>
    </div>
      <div class="row  justify-content-center " style="margin: 0px 10px 10px 10px; padding: 5px">
        <div class="col " style="margin:10px 5px 10px 0px; padding 5px;">
            <div class="row ">
                <div class="col hideOverflow " style="text-align:center;" >
              {{client.user.username}}

                </div>
            </div>
            <div class="row justify-content-center ">
                <div class="star-ratings-css">
                    <div class="star-ratings-css-top" style="width: {{client.get_rating}}%">★★★★★</div>
                     <div class="star-ratings-css-bottom">★★★★★</div>
                </div>
            </div>

        </div>


    </div>

    <div class="row border-top" style=" margin: 0px; padding: 0px">


<!--        <nav class="navbar " style="box-shadow: none; padding-right: 0px">-->

  <!-- Links -->
  <div class="navbar-nav flex list-group side-bar" style=" margin-left: 30px">
      <a class="row nav-item nav-link list-group-item" role="link" data-toggle="collapse" data-target="#create_collapse" aria-expanded="false"
        aria-controls="create_collapse" style="border-radius: 5px;">


        <span><i class="bx bx-icon bx-plus"></i>Create</span>

          </a>

<!--       <a class="row nav-item nav-link list-group-item" href="#" style="border-radius: 5px;">-->


<!--           <span><i class="bx bx-icon bx-group"></i>Friends</span>-->

<!--          </a>-->
<!--       <a class="row nav-item nav-link list-group-item" href="#" style="border-radius: 5px;">-->


<!--           <span><i class="bx bx-icon bx-horizontal-center"></i>Split</span>-->

<!--          </a>-->

        </div>

<!--</nav>-->

</div>

</div>
    <div class="col-md-2 " style=" padding:0px 0px 0px 10px; position: fixed; bottom:5px; background-color: rgba(191, 191, 191, 0.8); ">
<div class="row collapse justify-content-center "style="box-shadow:3px 3px 3px grey; border-radius: 5px; margin:2px; padding-top:0; background-color: rgba(230, 230, 230, 1); z-index:2000" id="create_collapse" >
 <form action="{% url 'moneypool:create_equb' %}" method="post">
   {% csrf_token %}
  <div class="col" style=" ">

    <div class="">
        <div class="row justify-content-end">
                <button class="btn" type="button" data-toggle="collapse" data-target="#create_collapse" aria-expanded="false"
                    aria-controls="create_collapse">
                    <i class="bx bx-icon bx-x"></i>
                </button>

        </div>
        <div class="form-row" >
              <div class="form-group">
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="private" required="" id="private_create" value="True">
                  <label class="form-check-label" style="font-size:16px;"for="private_create">private</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="private" required="" id="Public_create" value="False">
                  <label class="form-check-label" style="font-size:16px;" for="Public_create">public</label>
                </div>
                </div>
        </div>
              </div>
              <div class="form-row">
                <div class="col-md-12">
                  <div class="form-group">
                    <span class="form-label" style="font-size:16px;">Name</span>
                    <input class="form-control" type="text" name="name" maxlength="150" required="" id="id_name" placeholder="equb name">
                  </div>
                </div>
              </div>
              <div class="form-row">
                <div class="col-md-12">
                  <div class="form-group">
                    <span class="form-label" style="font-size:16px;">Cycle</span>
                    <input class="form-control" type="text" name="cycle" value="1 00:00:00" required="" id="id_cycle">
                  </div>
                </div>
              </div>
              <div class="form-row">
                <div class="col-md-12">
                  <div class="form-group">
                    <span class="form-label" style="font-size:16px;">Capacity</span>
                    <input class="form-control" type="number" name="capacity" step="1" required="" id="id_capacity" placeholder="1">
                  </div>
                </div>
              </div>
            <div class="form-row">
                <div class="col-md-6">
                  <div class="form-group">
                    <span class="form-label" style="font-size:16px;">Value</span>
                    <input class="form-control" type="number" name="value" step="0.01" required="" id="id_value" placeholder="0">
                  </div>
                </div>
              </div>
            <div class="row justify-content-center">
              <button class="btn btn-primary button-round" type="submit" value="create" style="width:100%; color: white; background-color: rgb(123, 168, 183)">
                create
              </button>
                </div>
            </div>

 </form>
</div>



</div>
<div class="col-md-10">

<div class="row justify-content-between" style="margin: 10px 0px 0px 10px">
<div class="col-md-7">


         <div class="row justify-content-center">
         <div class="col-md-12" style="margin: 10px;
      box-shadow:3px 3px 3px grey; background-color: rgb(230, 230, 230); border-left: 20px solid rgb(230, 230, 230);  border-right: 20px solid rgb(230, 230, 230); border-radius: 10px 10px 10px 10px; padding:10px;">
        <div class="row">
            <div class="col-md-12">
            <h5 class="" style="text-align: left">Approaching Equbs</h5>
                <hr>
                </div>


          </div>

{% if approaching_equbs%}
  <div class="row horizontal-scroll justify-content-start " style="
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  overflow-y: hidden;
  ">

      {%for equb in approaching_equbs%}
  <div class="card card-nav-tabs" style="flex-basis: 250px;
  flex-grow: 0;
  flex-shrink: 0;margin:0px 10px 10px 0px; overflow-x: hidden;
                -webkit-overflow-scrolling: touch;box-shadow:2px 2px 2px grey; border-radius:10px 10px 10px 10px; background-color: rgba(200, 200, 200, .6);">
    <div class=" card-header" style=" border-radius:10px 10px 0px 0px;
                background-color: rgb(123, 168, 183); padding: 10px">

              {{equb.name}}


    </div>
    <div class="card-body" style="padding: 4px">
      <div class="tab-content text-center">
        <div class="tab-pane active" id="{{equb.id}}_status">
            <ul class="list-group list-group-flush" >
            <li class="list-group-item d-flex justify-content-between align-items-center list-group-item-dark">

                {{equb.balance_manager.print_delta}} left
            </li>
            </ul>

          <div class="progress" >
            <div class="progress-bar bg-info" role="progressbar" style="width: {{equb.balance_manager.percent_completed}}%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
          <div class="card-footer  justify-content-center"
               style="background-color: rgba(200, 200, 200, .6); border-radius: 0 0 10px 10px">
            round {{equb.balance_manager.current_round}} of {{equb.capacity}}
          </div>
        </div>

      </div>
    </div>
  </div>

{% endfor %}
  </div>
      {% else %}
      <div class="row justify-content-center">
          <p style="text-align: center; margin-bottom: 0px; font-size: 15px">You have no approaching equbs</p>
      </div>

      {% endif%}
         </div>
        </div>

        <div class="row justify-content-center">
         <div class="col-md-12" style="margin: 10px;
      box-shadow:3px 3px 3px grey; background-color: rgb(230, 230, 230); border-left: 20px solid rgb(230, 230, 230);  border-right: 20px solid rgb(230, 230, 230); border-radius: 10px 10px 10px 10px; padding:10px;">
        <div class="row">
            <div class="col-md-12">
            <h5 class="" style="text-align: left">Pending Equbs</h5>
                <hr>
                </div>


          </div>

{% if pending_equbs%}
  <div class="row horizontal-scroll " style="
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  overflow-y: hidden;
  ">

      {%for equb in pending_equbs%}
  <div class="card card-nav-tabs" style="flex-basis: 250px;
  flex-grow: 0;
  flex-shrink: 0;margin:0px 10px 10px 0px; overflow-x: hidden;
                s-webkit-overflow-scrolling: touch;box-shadow:2px 2px 2px grey; border-radius:10px 10px 10px 10px; background-color: rgba(200, 200, 200, .6);">
    <div class=" card-header" style=" border-radius:10px 10px 0px 0px;
                background-color: rgb(123, 168, 183); padding: 10px">

              {{equb.name}}


    </div>
    <div class="card-body" style="padding: 4px">
                    <ul class="list-group list-group-flush" style="
                margin: 0px;
                overflow: overlay;
                overflow-x: hidden;
                -webkit-overflow-scrolling: touch;">
            <li class="list-group-item d-flex justify-content-between align-items-center list-group-item-dark border-bottom">
                Amount<b></b>
              <span class="badge badge-lg badge-success">${{equb.value}}</span>
            </li>

            <li class="list-group-item d-flex justify-content-between align-items-center list-group-item-dark border-bottom">
              Cycle<b></b>
              <span class="badge badge-dark" >
              {{equb.get_cycle}}
              </span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center list-group-item-dark border-bottom">
              Open Spots<b></b>
              <span class="badge badge-lg badge-info">
              {{equb.balance_manager.current_spots}} of  {{equb.capacity}}
              </span>
            </li>
                        <div class="progress" >
            <div class="progress-bar bg-info" role="progressbar" style="width: {{equb.balance_manager.percent_joined}}%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
          </div>

          </ul>



        </div>


  </div>

{% endfor %}
  </div>
      {% else %}
      <div class="row justify-content-center">
          <p style="text-align: center; margin-bottom: 0px; font-size: 15px">You have no pending equbs</p>
      </div>

      {% endif%}
         </div>
        </div>
    <div class="row justify-content-center">
         <div class="col-md-12" style="margin: 10px;
      box-shadow:3px 3px 3px grey; background-color: rgb(230, 230, 230); border-left: 20px solid rgb(230, 230, 230);  border-right: 20px solid rgb(230, 230, 230); border-radius: 10px 10px 10px 10px; padding:10px;">
        <div class="row">
            <div class="col-md-12">
            <h5 class="" style="text-align: left"> Equb Recommendations</h5>
                <hr>
                </div>


          </div>

{% if equb_recs%}
  <div class="row horizontal-scroll justify-content-start " style="
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  overflow-y: hidden;
  ">

      {%for equb in equb_recs%}
  <div class="card card-nav-tabs" style="flex-basis: 250px;
  flex-grow: 0;
  flex-shrink: 0;margin:0px 10px 10px 0px; overflow-x: hidden;
                -webkit-overflow-scrolling: touch;box-shadow:2px 2px 2px grey; border-radius:10px 10px 10px 10px; background-color: rgba(200, 200, 200, .6);">
    <div class=" card-header" style=" border-radius:10px 10px 0px 0px;
                background-color: rgb(123, 168, 183); padding: 10px">

              {{equb.name}}


    </div>
     <div class="card-body" style="padding: 4px">
                    <ul class="list-group list-group-flush" style="
                margin: 0px;
                overflow: overlay;
                overflow-x: hidden;
                -webkit-overflow-scrolling: touch;">
             <li class="list-group-item d-flex justify-content-between align-items-center list-group-item-dark border-bottom">
                Owner<b></b>
              <span class="badge badge-lg " style="background-color: rgb(107, 0, 179); color:white">{{equb.creator}}</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center list-group-item-dark border-bottom">
                Amount<b></b>
              <span class="badge badge-lg badge-success">${{equb.value}}</span>
            </li>

            <li class="list-group-item d-flex justify-content-between align-items-center list-group-item-dark border-bottom">
              Cycle<b></b>
              <span class="badge badge-dark" >
              {{equb.get_cycle}}
              </span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center list-group-item-dark border-bottom">
              Open Spots<b></b>
              <span class="badge badge-lg badge-info">
              {{equb.balance_manager.current_spots}} of  {{equb.capacity}}
              </span>
            </li>
                        <div class="progress" >
            <div class="progress-bar bg-info" role="progressbar" style="width: {{equb.balance_manager.percent_joined}}%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
          </div>

          </ul>



        </div>
      <div class="card-body " style="text-align:center">
           <a class=" btn" href="{% url 'moneypool:join_equb' equb.name %}" style=" width:100%; color:white;background-color: rgb(123, 168, 183);">
                    join
                </a>
      </div>
  </div>

{% endfor %}
  </div>
      {% else %}
      <div class="row justify-content-center">
          <p style="text-align: center; margin-bottom: 0px; font-size: 15px">You have no recommended equbs</p>
      </div>

      {% endif%}
         </div>
        </div>





    </div>


 <div  class=" col-md-4 d-none d-md-block" >
</div>
<div class="col-md-4 d-none d-md-block border-right" style="position: fixed; right:0px; background-color: rgba(191, 191, 191, 0.8); height:100%;">

    {% include 'moneypool/equb_invitations_box.html' %}



    </div>

    <div class="row" style="margin: 10px;position:fixed; bottom:0px;right:20px;">
<!--        <div class="col" id="live-equb-test">-->
<!--            ........-->
<!--        </div>-->

    </div>

    </div>


</div>

    </div>
<div class="row justify-content-end" style="position: fixed; bottom:0px; right:30px; " id="pinned_equb_holder">
    <button class=" btn btn-round btn-lg pinned_equb_toggle"
                 style=" position: absolute; bottom:10px; right:30px; box-shadow:3px 3px 3px grey;
                 background-color: rgb(230, 230, 230); border-radius:50%; " id="circle_pin" >
         <i class="bx bx-icon bx-pin"></i>

    </button>

{% include 'moneypool/pinned_equb_box.html' %}



</div>


    {% endblock %}
