<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
      new_base
    </title>
    <meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.1.1/dist/css/bootstrap-material-design.min.css" integrity="sha384-wXznGJNEXNG1NFsbm0ugrLFMQPWswR3lds2VeinahP8N0zJw9VWSopbjv2x7WCvX" crossorigin="anonymous">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'/>
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Sniglet">
    {% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'moneypool/css/custom.css' %}">
    <style>

path {
  fill: none;
  stroke: black;
  stroke-width: black;
}

#container{
  width: 100%;
  max-width: 100%;
  height: 100px;
  background-color: rgba(100, 100, 100, .1);
}





    .invite_yes {
    background-color: rgba(123, 168, 183, 0.3) !important;
    }

<!--    .modal-cont {-->
<!--    -webkit-transform: translate3d(0,0,0);-->
<!--    }-->
     .modal-backdrop {
  display: none !important;
}
.modal-open .modal {
    width: 300px;
    margin: 0 auto;
}
body.modal-open {
    overflow: auto !important;
}
.modal-backdrop
{
    opacity:0 !important;
}
.modal.in .modal-dialog {
    position:fixed;
    bottom:0px;
    right:15px;
    margin:0px;
}

      ::-webkit-scrollbar {
    background-color: rgba(0, 0, 0, 0);
    width: 5px;
}
::-webkit-scrollbar-thumb {
background: rgb(166, 166, 166) !important;
border-radius: 10px;
width: 5px;
}



<!--.current_tab {-->
<!--  background_color: rgb(204, 204, 204);-->
<!--}-->






    </style>
  </head>
  <body  style=" font-family: 'Sniglet'; font-size: 20px; background-color: rgba(191, 191, 191, 0.6)">

<script>
   function changeTabTo(current_tab) {
  var element = document.getElementById(current_tab);
  element.style.background = "rgba(204, 204, 204,0.5)";
  element.style.borderRadius = "7px"
}

</script>







  <nav class="navbar fixed-top navbar-expand-lg" style=" background-color: #fff; border-radius:0px 0px 10px 10px;">
      <div class="container">
        <div class="navbar-translate">
          <a class="navbar-brand">
          <b>Equb</b>
          </a>
        </div>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mynavbar" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bx bx-icon bx-menu"></i>
        </button>
        <div class="collapse navbar-collapse" id="mynavbar">
          <ul class="navbar-nav ml-auto">
             <li class="nav-item " id="home_tab" >
              <a href="{% url 'moneypool:home' %}"  class="nav-link">
                <!--                <i class="bx bx-money bx-border"></i> -->
                Home
              </a>
            </li>
            <li class="nav-item " id="my_equbs_tab" >
              <a href="{% url 'moneypool:my_equbs' %}" class="nav-link">
                <!--                <i class="bx bx-money bx-border"></i> -->
                My Equbs
              </a>
            </li>
            <li class="nav-item " id="create_tab" >
              <a href="{% url 'moneypool:create_equb' %}" class="nav-link">
                <!--                <i class="bx bx-add-to-queue bx-border"></i> -->
                Create
              </a>
            </li>
            <li class="nav-item " id="friends_tab">
              <a href="#" class="nav-link">
                <!--                <i class="bx bx-group bx-border"></i> -->
                Friends
              </a>
            </li>
            <li class="nav-item">
              <a href="{% url 'moneypool:log_out' %}" class="nav-link">
                Log out
              </a>
            </li>
            <form class="form-inline" action="{% url 'moneypool:search_equb' %}" method="get">
              <div class="form-group no-border">
                <input type="text" name="equb_name" class="form-control" placeholder="Search equb">
              </div>
              <button type="submit" class="btn btn-white btn-just-icon btn-round">
              <i class="material-icons">search</i>
              </button>
            </form>
          </ul>
        </div>
      </div>
    </nav>
    <br>
    <br>
    <br>

  {% block content %}
  {% endblock %}



    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js" integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/bootstrap-material-design@4.1.1/dist/js/bootstrap-material-design.js" integrity="sha384-CauSuKpEqAFajSpkdjv3z9t8E7RlpJ1UP0lKM/+NdtSarroVKu069AlsRPKkFBz9" crossorigin="anonymous"></script>



      <script>

$( '.invite_to_equb' ).click(function() {
  $( this ).toggleClass( 'invite_yes' );
});

<!--var csrftoken = Cookies.get('csrftoken');-->

<!--$.ajaxSetup({-->
<!--    beforeSend: function(xhr, settings) {-->
<!--        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {-->
<!--            xhr.setRequestHeader("X-CSRFToken", csrftoken);-->
<!--            xhr.setRequestHeader("content-type", "application/json");-->
<!--        }-->
<!--    }-->
<!--});-->



$('.invite_button').click( function(event) {
    var equb_id = this.classList[0];
    var invitees = $(`.invite_to_equb.${equb_id}.invite_yes`);
    var data = {csrfmiddlewaretoken: "{{ csrf_token }}", 'equb_id': Number(equb_id), 'invited':[]};
    for (let invitee of invitees) {
        data['invited'].push(invitee.innerText);
    }

  event.preventDefault();
  $.ajax({
    type : "POST",
    url : "http://127.0.0.1:8000/moneypool/invite",
    csrfmiddlewaretoken: "{{ csrf_token }}",
    data : data,
<!--&lt;!&ndash;    headers: {&ndash;&gt;-->
<!--&lt;!&ndash;      'Accept': 'application/json',&ndash;&gt;-->
<!--&lt;!&ndash;      'Content-Type': 'application/json'&ndash;&gt;-->
<!--&lt;!&ndash;      },&ndash;&gt;-->
<!--    contentType: 'application/json; charset=utf-8',-->
<!--    dataType: "json",-->

<!--    success: function(){-->
<!--        alert("Saved! It worked.");-->
<!--      },-->
    error: function(XMLHttpRequest, textStatus, errorThrown) {
      alert("some error " + String(errorThrown) + String(textStatus) + String(XMLHttpRequest.responseText));
      }
    });
  });

      </script>





<p class="test-live"></p>
  <script>
$('.live-equb').change( function () {
   var pinnedEqub = $('.live-equb option:selected')[0].value;
   $('.test-live').append(pinnedEqub);
   event.preventDefault();
  $.ajax({
    type : "POST",
    url : "{% url 'moneypool:pin_equb' %}",
    csrfmiddlewaretoken: "{{ csrf_token }}",
    data : {csrfmiddlewaretoken: "{{ csrf_token }}",'pinnedEqub': Number(pinnedEqub)},
    error: function(XMLHttpRequest, textStatus, errorThrown) {
      alert("some error " + String(errorThrown) + String(textStatus) + String(XMLHttpRequest.responseText));
      }
    });
  });

  </script>

  </body>
</html>
